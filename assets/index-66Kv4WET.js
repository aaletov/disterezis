import{P as e}from"./phaser-pjvDu-AS.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={type:e.AUTO,width:300,height:600,backgroundColor:3355443,scene:{preload:function(){},create:function(){i=p(),s=u(),l=u(),this.input.keyboard.on("keydown-LEFT",(()=>d(-1))),this.input.keyboard.on("keydown-RIGHT",(()=>d(1))),this.input.keyboard.on("keydown-DOWN",(()=>y())),this.input.keyboard.on("keydown-UP",(()=>function(){const e=s.shape.map(((e,t)=>e.map(((e,n)=>s.shape[s.shape.length-1-n][t])))),t=s.shape;s.shape=e,g()&&(s.shape=t)}()))},update:function(e){const t=e-f;f=e,c+=t,c>a&&(c=0,y()),function(e){var t;null==(t=e.graphics)||t.clear(),e.graphics=e.add.graphics();for(let s=0;s<o;s++)for(let t=0;t<r;t++){const r=i[s][t]?16777215:5592405;e.graphics.fillStyle(r,i[s][t]?1:.1),e.graphics.fillRect(t*n,s*n,n-1,n-1)}for(let r=0;r<s.shape.length;r++)for(let t=0;t<s.shape[r].length;t++)s.shape[r][t]&&(e.graphics.fillStyle(16711680,1),e.graphics.fillRect((s.x+t)*n,(s.y+r)*n,n-1,n-1))}(this)}}};new e.Game(t);const n=30,r=10,o=20;let i,s,l,a=500,c=0,f=0;const h=[[[1,1,1,1]],[[1,1],[1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,1,1],[0,1,0]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]]];function p(){return Array.from({length:o},(()=>Array(r).fill(0)))}function u(){const t=e.Math.RND.pick(h);return{x:Math.floor(r/2)-Math.floor(t[0].length/2),y:0,shape:t}}function d(e){s.x+=e,g()&&(s.x-=e)}function y(){s.y++,g()&&(s.y--,function(){for(let e=0;e<s.shape.length;e++)for(let t=0;t<s.shape[e].length;t++)s.shape[e][t]&&(i[s.y+e][s.x+t]=1)}(),s=l,l=u(),function(){for(i=i.filter((e=>e.some((e=>!e))));i.length<o;)i.unshift(Array(r).fill(0))}(),g()&&(i=p()))}function g(){var e;for(let t=0;t<s.shape.length;t++)for(let n=0;n<s.shape[t].length;n++)if(s.shape[t][n]&&(void 0===(null==(e=i[s.y+t])?void 0:e[s.x+n])||i[s.y+t][s.x+n]))return!0;return!1}
